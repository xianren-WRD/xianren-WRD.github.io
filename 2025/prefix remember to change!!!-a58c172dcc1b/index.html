<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="代码,博客,折腾,汽车电子"><meta name="description" content="分享嵌入式系统与CAN总线开发相关知识"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>OBD诊断介绍 | 仙人</title><meta name="generator" content="hexo-theme-ayer"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/dist/main.css"><link rel="stylesheet" href="/css/fonts/remixicon.css"><link rel="stylesheet" href="/css/custom.css"><script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script><style>.swal2-styled.swal2-confirm{font-size:1.6rem}</style><link rel="alternate" href="/atom.xml" title="仙人" type="application/atom+xml"></head></html><body><div id="app"><canvas width="1777" height="841" style="position:fixed;left:0;top:0;z-index:99999;pointer-events:none"></canvas><main class="content on"><section class="outer"><article id="post-OBD诊断介绍" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal><div class="article-inner"><header class="article-header"><h1 class="article-title sea-center" style="border-left:0" itemprop="name">OBD诊断介绍</h1></header><div class="article-meta"><a href="/2025/prefix%20remember%20to%20change!!!-a58c172dcc1b/" class="article-date"><time datetime="2025-11-30T14:09:36.000Z" itemprop="datePublished">2025-11-30</time></a><div class="article-category"><a class="article-category-link" href="/categories/%E6%B1%BD%E8%BD%A6%E4%B8%8E%E5%B7%A5%E4%B8%9A%E7%BD%91%E7%BB%9C/">汽车与工业网络</a></div><div class="word_count"><span class="post-time"><span class="post-meta-item-icon"><i class="ri-quill-pen-line"></i> <span class="post-meta-item-text">字数统计:</span> <span class="post-count">3k</span> </span></span><span class="post-time">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="ri-book-open-line"></i> <span class="post-meta-item-text">阅读时长≈</span> <span class="post-count">11 分钟</span></span></span></div></div><div class="tocbot"></div><div class="article-entry" itemprop="articleBody"><h1 id="OBD诊断"><a href="#OBD诊断" class="headerlink" title="OBD诊断"></a>OBD诊断</h1><p><strong>OBD系统的首要任务和设计初衷，就是为了确保汽车在整个生命周期内，其尾气排放都能符合环保法规要求，从而保护大气环境和公众健康。</strong></p><p>它不是为了提高性能或舒适度，而是一个由<strong>政府法规强制推行</strong>的、用于<strong>环保监督</strong>的系统。当它亮起那个黄色的发动机故障灯时，本质上是在说：“<strong>我的排放系统出问题了，现在排出的尾气可能超标，对环境不友好，需要尽快检修！</strong>”</p><p>主要的有害排放物有哪些？</p><ol><li><p><strong>一氧化碳 (CO)<strong>：一种无色无味的有毒气体。可以把它理解为“</strong>燃料不完全燃烧的产物</strong>”。它会阻碍血液输送氧气，高浓度时致命。</p></li><li><p><strong>碳氢化合物 (HC)<strong>：本质上就是</strong>未燃烧的燃油</strong>。它和氮氧化物在阳光下会发生反应，形成光化学烟雾，刺激人眼和呼吸道。</p></li><li><p><strong>氮氧化物 (NOx)<strong>：包括NO和NO₂等。是在高温高压下，空气中氮气和氧气反应的产物。它是形成</strong>酸雨和雾霾（PM2.5）</strong> 的重要元凶，也会对人体肺部造成损害。</p></li><li><p>颗粒物 (PM)：特别是柴油车产生的“黑烟”，就是由大量颗粒物组成的。这些微小的颗粒可以深入肺部，引发呼吸系统和心血管疾病。</p></li></ol><h2 id="OBD如何“关注”排放？"><a href="#OBD如何“关注”排放？" class="headerlink" title="OBD如何“关注”排放？"></a>OBD如何“关注”排放？</h2><p>OBD系统本身不直接减少排放，它扮演的是一个 <strong>“7x24小时不间断的排放系统监督员”</strong> 的角色。它的工作逻辑是：</p><p><strong>监控 → 发现异常 → 报警 → 确保可维修</strong></p><p>它通过监控与排放相关的<strong>几十个甚至上百个</strong>传感器、执行器和子系统，来确保整个“消化和排泄系统”工作正常。具体来说：</p><ul><li><p><strong>监控“消化”效率</strong>：</p><ul><li><p><strong>发动机燃烧状况</strong>：通过氧传感器、曲轴位置传感器等，监控燃烧是否充分。如果燃烧不好，就会导致CO和HC飙升。</p></li><li><p><strong>燃油系统</strong>：监控喷油嘴的工作情况，确保喷油量精确。喷油过多或过少都会影响排放。</p></li></ul></li><li><p><strong>监控“垃圾处理”系统</strong>：</p><ul><li><p>三元催化器 (TWC)：这是<strong>最重要的尾气净化装置</strong>，能同时净化CO、HC和NOx。OBD系统会通过催化器前后端的氧传感器，来实时监测它的净化效率。如果效率下降到阈值以下，OBD就会立刻报警。</p></li><li><p>颗粒捕集器 (DPF)：用于捕捉柴油车产生的颗粒物。OBD会监控它的堵塞情况，并在需要时提醒司机进行“再生”清理。</p></li><li><p>废气再循环 (EGR)：通过将部分废气再次引入气缸，降低燃烧温度，从而减少NOx的生成。OBD会监控EGR阀的工作是否正常。</p></li></ul></li></ul><h1 id="OBD诊断和UDS诊断对比"><a href="#OBD诊断和UDS诊断对比" class="headerlink" title="OBD诊断和UDS诊断对比"></a>OBD诊断和UDS诊断对比</h1><p>OBD和UDS虽然都用于车载诊断，但定位和能力不同。</p><p>OBD是满足法规要求的“基础体检”，重点关注排放；UDS则是用于深度开发、调试和维修的“全面精准检查”。</p><table><thead><tr><th align="left">对比维度</th><th align="left">🔧 <strong>OBD (车载诊断系统)</strong></th><th align="left">🔬 <strong>UDS (统一诊断服务)</strong></th></tr></thead><tbody><tr><td align="left"><strong>主要目标</strong></td><td align="left">专注于<strong>监控与排放相关的系统和元件</strong></td><td align="left">提供<strong>统一的、全面的ECU诊断通信</strong>规范</td></tr><tr><td align="left"><strong>法规强制力</strong></td><td align="left"><strong>强制的</strong>，需满足法规要求</td><td align="left"><strong>推荐的</strong>，无统一法规强制，由厂商决定采用程度</td></tr><tr><td align="left"><strong>应用范围</strong></td><td align="left">主要针对<strong>排放相关系统</strong>（如发动机、催化转化器）</td><td align="left">覆盖车辆<strong>所有电子控制单元(ECU)</strong></td></tr><tr><td align="left"><strong>协议与标准化</strong></td><td align="left">协议相对<strong>固定</strong></td><td align="left">协议<strong>可扩展</strong>，支持多种总线，厂商可定义私有服务</td></tr><tr><td align="left"><strong>诊断深度与功能</strong></td><td align="left"><strong>标准化功能</strong>，如读取排放相关故障码(DTC)、就绪状态、实时数据</td><td align="left"><strong>深度交互功能</strong>，支持读写内存、安全访问、软件更新等</td></tr></tbody></table><p>简单来说，可以把OBD理解为运行在ISO-TP之上的一套<strong>固定的、专用的诊断服务集</strong>，而UDS则是一套<strong>丰富的、可配置的诊断服务集</strong>。在AUTOSAR架构中，来自诊断工具的OBD请求和UDS请求，都会由<strong>DCM模块</strong>统一接收和处理，并根据请求的服务ID（SID）分发给相应的处理程序。</p><h1 id="AUTOSAR中实现OBD诊断的核心模块"><a href="#AUTOSAR中实现OBD诊断的核心模块" class="headerlink" title="AUTOSAR中实现OBD诊断的核心模块"></a>AUTOSAR中实现OBD诊断的核心模块</h1><p>在AUTOSAR (汽车开放系统架构) 软件架构中，OBD功能的实现主要由以下核心模块协同完成：</p><ul><li><p><strong>DCM (诊断通信管理器)</strong> : DCM是诊断请求的“<strong>总调度室</strong>”。它遵循OBD及相关诊断通信标准，当你用诊断工具发送OBD请求时，DCM负责接收、解析，并确保请求被正确响应。它内部通常由DSL (会话层)、DSD (服务分发器) 和DSP (服务处理) 子模块构成，共同管理诊断会话状态、分发请求并协调响应。</p></li><li><p><strong>DEM (诊断事件管理器)</strong> : DEM是故障信息的“<strong>档案管理员</strong>”。与排放相关的监控系统（如燃油系统）检测到故障时，会报告给DEM。DEM则负责处理和存储这些“诊断事件”（包括与之相关的故障码DTC），并记录故障发生时的“冻结帧”数据（如当时的车速、发动机转速）。此外，OBD法规要求的<strong>IUMPR (在用监测性能比率)</strong> 计算也由DEM负责。</p></li><li><p><strong>FIM (功能抑制管理器)</strong> : FIM是系统功能的“<strong>安全开关</strong>”。它与DEM协同工作，当诊断确认某些特定故障时，FIM会根据预设策略<strong>禁止或启用ECU的某些功能</strong>，以防止故障扩大或确保安全，例如在检测到相关故障时禁止进行排放诊断测试或停止递增IUMPR计数器。</p></li></ul><h1 id="OBD诊断协议详解"><a href="#OBD诊断协议详解" class="headerlink" title="OBD诊断协议详解"></a>OBD诊断协议详解</h1><p>OBD-II作为一个法规强制系统，其协议的核心特点是<strong>标准化、固定化</strong>，这与UDS的高度可配置性形成鲜明对比。</p><h2 id="支持的核心诊断服务"><a href="#支持的核心诊断服务" class="headerlink" title="支持的核心诊断服务"></a>支持的核心诊断服务</h2><p>OBD-II标准强制定义了一组用于排放相关诊断的<strong>9种模式（Mode）</strong>，这些模式在UDS中大致对应不同的<strong>诊断服务（Service）</strong>。下表详细列出了这些模式及其与UDS的对比：</p><table><thead><tr><th align="left">OBD 模式</th><th align="left">等效 UDS 服务&#x2F;概念</th><th align="left">服务描述</th><th align="left">请求报文示例</th><th align="left">正响应报文示例</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><strong>Mode $01</strong></td><td align="left">类似 <code>0x22</code></td><td align="left"><strong>请求当前动力系统状态数据</strong></td><td align="left"><code>01 00</code><br>(请求PID $00支持的所有PID列表)</td><td align="left"><code>41 00 BE 1F A8 13</code><br>(<code>41</code>&#x3D;Mode01响应; <code>00</code>&#x3D;请求的PID; <code>BE 1F A8 13</code>&#x3D;支持的PID位掩码)</td><td align="left">核心数据获取方式，通过PID参数化</td></tr><tr><td align="left"><strong>Mode $02</strong></td><td align="left">类似 <code>0x19</code> (子服务 $04)</td><td align="left"><strong>请求冻结帧数据</strong></td><td align="left"><code>02 01</code><br>(请求冻结帧1的数据)</td><td align="left"><code>42 01 00 07 E0 ...</code><br>(<code>42</code>&#x3D;Mode02响应; <code>01</code>&#x3D;冻结帧号; 后续为数据)</td><td align="left">冻结帧是DEM管理的“故障快照”</td></tr><tr><td align="left"><strong>Mode $03</strong></td><td align="left">类似 <code>0x19</code> (子服务 $02)</td><td align="left"><strong>请求排放相关的已确认故障码</strong></td><td align="left"><code>03</code></td><td align="left"><code>43 01 33 00 00 00</code><br>(<code>43</code>&#x3D;Mode03响应; <code>01 33</code>为DTC)</td><td align="left">DTC格式标准化，DEM负责存储管理</td></tr><tr><td align="left"><strong>Mode $04</strong></td><td align="left">类似 <code>0x14</code></td><td align="left"><strong>清除&#x2F;复位排放相关的诊断信息</strong></td><td align="left"><code>04</code></td><td align="left"><code>44</code></td><td align="left">清除DTC、冻结帧，并重置IUMPR</td></tr><tr><td align="left"><strong>Mode $05</strong></td><td align="left">类似 <code>0x22</code></td><td align="left"><strong>请求氧传感器监测测试结果</strong></td><td align="left"><code>05 01</code><br>(请求测试ID $01的结果)</td><td align="left"><code>45 01 8A FF ...</code></td><td align="left">用于监控催化器效率等。<br>Mode 5读取氧传感器的监测结果。只有K_line的系统支持Mode 5的输出，CAN通信系统氧传感器信息输出到Mode 6。<br>ISO 15031-5中定义了所有可以获得的氧传感器信息。每条信息都有一个TID与之相对应。Mode 5支持输出哪些TID的输出是根据项目的具体配置设定的。</td></tr><tr><td align="left"><strong>Mode $06</strong></td><td align="left">类似 Mode <code>0x05</code></td><td align="left"><strong>请求指定监控系统的测试结果</strong></td><td align="left"><code>06 01</code><br>(请求TID $01的结果)</td><td align="left"><code>46 01 00 03 ...</code></td><td align="left">监控具体部件，如EGR、EVAP等。CAN通信Mode6的输出包括OBDMID、TID、USID、测量值、最小值、最大值。 OBDMID、部分TID、USID在ISO 15031-5中有标准化定义。</td></tr><tr><td align="left"><strong>Mode $07</strong></td><td align="left">类似 <code>0x19</code> (子服务 $02)</td><td align="left"><strong>请求排放相关的待处理故障码</strong></td><td align="left"><code>07</code></td><td align="left"><code>47 00 00 00 00</code><br>(无待处理DTC)</td><td align="left">表示可能未稳定触发的故障（当前以及上一个驾驶循环中出现的pending状态的DTC）</td></tr><tr><td align="left"><strong>Mode $08</strong></td><td align="left">类似 <code>0x31</code></td><td align="left"><strong>请求控制车载系统或部件</strong></td><td align="left"><code>08 01</code><br>(请求运行测试 $01)</td><td align="left"><code>48 01</code></td><td align="left">用于主动测试，如控制继电器</td></tr><tr><td align="left"><strong>Mode $09</strong></td><td align="left">类似 <code>0x22</code></td><td align="left"><strong>请求车辆和ECU信息</strong></td><td align="left"><code>09 02</code><br>(请求信息类型 $02)</td><td align="left"><code>49 02 48 32 30 30 30</code><br>(VIN&#x3D;”H2000”)</td><td align="left">读取VIN、CALID、CVN等</td></tr><tr><td align="left"><strong>Mode $0A</strong></td><td align="left">类似 <code>0x19</code></td><td align="left"><strong>请求排放相关的永久故障</strong></td><td align="left"><code>0A</code></td><td align="left"><code>4A 00</code></td><td align="left"></td></tr></tbody></table><p><strong>与UDS的关键区别：</strong></p><ul><li><strong>服务ID固定</strong>：OBD的服务（模式）是预定义的，范围是01-0A，而UDS的服务ID范围更广（如10, 22, 2E等），且允许厂商自定义。</li><li><strong>参数化访问</strong>：OBD严重依赖PID、TID等参数来访问特定数据，结构固定。UDS则通过DID（Data Identifier）来读写任意数据，更加灵活。</li></ul><h2 id="请求与响应格式"><a href="#请求与响应格式" class="headerlink" title="请求与响应格式"></a>请求与响应格式</h2><p>OBD的报文格式非常规整，这与UDS的可变长度格式有所不同。</p><ul><li><p><strong>请求格式</strong>：<br><code>[模式 Mode] [参数 PID/TID]</code></p><ul><li>例如 <code>01 0C</code> 表示请求模式01下的PID $0C（发动机转速）数据。</li><li>非常简洁，没有UDS中可能存在的子功能码或复杂的数据参数。</li></ul></li><li><p><strong>正响应格式</strong>：<br><code>[模式 + 0x40] [请求的 PID/TID] [数据 1] [数据 2] ...</code></p><ul><li>例如，对 <code>01 0C</code> 的正响应是 <code>41 0C 1A F8</code>。</li><li><code>41</code> &#x3D; <code>01</code> + <code>40</code>，这是OBD响应报文的固定规则。</li><li><code>1A F8</code> 是两个字节的原始数据，需要根据标准公式转换为有意义的物理值（如转速 &#x3D; <code>(256 * 0x1A + 0xF8) / 4 = 1728 RPM</code>）。</li></ul></li></ul><h2 id="物理寻址与功能寻址"><a href="#物理寻址与功能寻址" class="headerlink" title="物理寻址与功能寻址"></a>物理寻址与功能寻址</h2><p><strong>OBD明确支持物理寻址和功能寻址，这是其协议架构的基础。</strong></p><ul><li><p><strong>功能寻址</strong>：</p><ul><li><strong>目的</strong>：用于<strong>广播</strong>诊断请求。所有监听在OBD功能地址上的ECU都必须接收并处理该请求。</li><li><strong>地址</strong>：在CAN总线中，OBD-II法规规定的<strong>功能请求地址是 0x7DF</strong>。</li><li><strong>场景</strong>：当诊断工具发送一条请求到0x7DF时，所有支持该请求的ECU（主要是动力系统相关的ECU）都应当处理。</li></ul></li><li><p><strong>物理寻址</strong>：</p><ul><li><strong>目的</strong>：用于<strong>单播</strong>响应。每个ECU必须使用自己唯一的物理地址进行回复，以避免总线冲突。</li><li><strong>地址</strong>：在CAN总线中，ECU的<strong>物理响应地址范围是 0x7E8 到 0x7EF</strong>。通常，发动机ECU会使用0x7E8，变速箱ECU使用0x7E9，以此类推。</li><li><strong>工作流程</strong>：<ol><li>诊断工具发送功能寻址请求到 <code>0x7DF</code>。</li><li>支持该请求的ECU（例如发动机ECU）处理请求。</li><li>该ECU使用自己的物理地址（例如 <code>0x7E8</code>）将响应发送回诊断工具。</li></ol></li></ul></li></ul><p><strong>与UDS的对比</strong>：<br>概念上与UDS完全一致。UDS中使用<strong>功能地址</strong>（如0x7DF）进行广播请求，使用<strong>物理地址</strong>（如0x7E0&#x2F;0x7E8）进行一对一通信。OBD可以看作是UDS在这方面的一个具体应用实例。</p><h2 id="传输层协议"><a href="#传输层协议" class="headerlink" title="传输层协议"></a>传输层协议</h2><p><strong>OBD over CAN 必须支持TP。</strong></p><ul><li><strong>协议</strong>：当OBD诊断报文在CAN总线上传输，且单帧无法容纳所有数据时，必须使用<strong>ISO 15765-4</strong>（也就是我们常说的<strong>ISO-TP</strong>）作为传输层协议。</li><li><strong>作用</strong>：与UDS over CAN完全一样，ISO-TP负责将长于8字节（对于经典CAN）的诊断报文进行<strong>分段、传输和重组</strong>。</li><li><strong>示例</strong>：<ul><li>请求车辆VIN（Mode 09, PID $02）时，VIN字符串长度超过7字节，就无法在一个CAN数据帧中装下。</li><li>此时，ECU的响应会使用ISO-TP的多帧传输：<ul><li><strong>首帧</strong>：指示总数据长度。</li><li><strong>连续帧</strong>：携带剩余的数据。</li></ul></li></ul></li></ul><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/706045388">汽车诊断及OBD和UDS协议的基础概念介绍 - 知乎</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/662834071">OBD 诊断 初入门 - 知乎</a></p><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/67674852">OBD(On-Board Diagnostic)介绍 - 知乎</a></p><div id="reword-out"><div id="reward-btn">打赏</div></div></div><div class="declare"><ul class="post-copyright"><li><i class="ri-copyright-line"></i> <strong>版权声明： </strong>本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！</li></ul></div><footer class="article-footer"><div class="share-btn"><span class="share-sns share-outer"><i class="ri-share-forward-line"></i> 分享</span><div class="share-wrap"><i class="arrow"></i><div class="share-icons"><a class="weibo share-sns" href="javascript:;" data-type="weibo"><i class="ri-weibo-fill"></i> </a><a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin"><i class="ri-wechat-fill"></i> </a><a class="qq share-sns" href="javascript:;" data-type="qq"><i class="ri-qq-fill"></i> </a><a class="douban share-sns" href="javascript:;" data-type="douban"><i class="ri-douban-line"></i> </a><a class="facebook share-sns" href="javascript:;" data-type="facebook"><i class="ri-facebook-circle-fill"></i> </a><a class="twitter share-sns" href="javascript:;" data-type="twitter"><i class="ri-twitter-fill"></i> </a><a class="google share-sns" href="javascript:;" data-type="google"><i class="ri-google-fill"></i></a></div></div></div><div class="wx-share-modal"><a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a><p>扫一扫，分享到微信</p><div class="wx-qrcode"><img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://xianren-wrd.github.io/2025/prefix%20remember%20to%20change!!!-a58c172dcc1b/" alt="微信分享二维码"></div></div><div id="share-mask"></div><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%8A%E6%96%AD/" rel="tag">诊断</a></li></ul></footer></div><nav class="article-nav"><a href="/2025/prefix%20remember%20to%20change!!!-3f5ba5b47990/" class="article-nav-link"><strong class="article-nav-caption">上一篇</strong><div class="article-nav-title">A2L文件生成</div></a><a href="/2025/prefix%20remember%20to%20change!!!-ef0ad893c1c4/" class="article-nav-link"><strong class="article-nav-caption">下一篇</strong><div class="article-nav-title">E2E介绍</div></a></nav><script src="https://cdn.staticfile.org/twikoo/1.4.18/twikoo.all.min.js"></script><div id="twikoo" class="twikoo"></div><script>twikoo.init({envId:""})</script></article></section><footer class="footer"><div class="outer"><ul><li>Copyrights &copy; 2021-2025 <i class="ri-heart-fill heart_icon"></i> wrd</li></ul><ul><li></li></ul><ul><li><span><span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></span> <span class="division">|</span> <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span></span></li></ul><ul></ul><ul></ul><ul><li><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914"></script></li></ul></div></footer></main><div class="float_btns"><div class="totop" id="totop"><i class="ri-arrow-up-line"></i></div><div class="todark" id="todark"><i class="ri-moon-line"></i></div></div><aside class="sidebar on"><button class="navbar-toggle"></button><nav class="navbar"><div class="logo"><a href="/"><img src="/images/ayer-side.svg" alt="仙人"></a></div><ul class="nav nav-main"><li class="nav-item"><a class="nav-item-link" href="/">主页</a></li><li class="nav-item"><a class="nav-item-link" href="/archives">归档</a></li><li class="nav-item"><a class="nav-item-link" href="/categories">分类</a></li><li class="nav-item"><a class="nav-item-link" href="/tags">标签</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><a class="nav-item-link nav-item-search" title="搜索"><i class="ri-search-line"></i> </a><a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed"><i class="ri-rss-line"></i></a></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"><input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><div id="mask"></div><div id="reward"><span class="close"><i class="ri-close-line"></i></span><p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p><div class="reward-box"><div class="reward-item"><img class="reward-img" src="/images/alipay.jpg"> <span class="reward-type">支付宝</span></div><div class="reward-item"><img class="reward-img" src="/images/wechat.jpg"> <span class="reward-type">微信</span></div></div></div><script src="/js/jquery-3.6.0.min.js"></script><script src="/js/lazyload.min.js"></script><script src="/js/tocbot.min.js"></script><script>tocbot.init({tocSelector:".tocbot",contentSelector:".article-entry",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,scrollContainer:"main",positionFixedSelector:".tocbot",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"})</script><script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script><link rel="stylesheet" href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"><script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script><script src="/dist/main.js"></script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css"><script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script><script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script><script>function viewer_init(){let i=document.querySelectorAll(".pswp")[0],r=document.querySelectorAll(".article-entry img:not(.reward-img)");r.forEach((t,e)=>{t.onclick=()=>{if(!document.querySelector(".left-col.show")){let o=[];r.forEach((t,e)=>{t.getAttribute("data-idx",e);var e=t.getAttribute("data-target")||t.getAttribute("src"),i=t.getAttribute("alt"),r=new Image;r.src=e,o.push({src:e,w:r.width||t.width,h:r.height||t.height,title:i})}),new PhotoSwipe(i,PhotoSwipeUI_Default,o,{index:parseInt(e)}).init()}}})}viewer_init()</script><script src="/js/busuanzi-2.3.pure.min.js"></script><script src="/js/clickBoom2.js"></script><link rel="stylesheet" href="/css/clipboard.css"><script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script><script>function wait(e,i){window.setTimeout(e,i)}!function(){var e;e="",e+='<button class="btn-copy" data-clipboard-snippet=""><i class="ri-file-copy-2-line"></i><span>COPY</span></button>',$(".highlight .code pre").before(e),$(".article pre code").before(e),(e=new ClipboardJS(".btn-copy",{target:function(e){return e.nextElementSibling}})).on("success",function(e){e=$(e.trigger);e.addClass("copied");let i=$(e.find("i")),n=(i.removeClass("ri-file-copy-2-line"),i.addClass("ri-checkbox-circle-line"),$(e.find("span")));n[0].innerText="COPIED",wait(function(){i.removeClass("ri-checkbox-circle-line"),i.addClass("ri-file-copy-2-line"),n[0].innerText="COPY"},2e3)}),e.on("error",function(e){e.clearSelection();e=$(e.trigger);e.addClass("copy-failed");let i=$(e.find("i")),n=(i.removeClass("ri-file-copy-2-line"),i.addClass("ri-time-line"),$(e.find("span")));n[0].innerText="COPY FAILED",wait(function(){i.removeClass("ri-time-line"),i.addClass("ri-file-copy-2-line"),n[0].innerText="COPY"},2e3)})}((window,document))</script><script src="/js/dz.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></div></body>